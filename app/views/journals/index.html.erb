<h1><%= t(:listing_journals, :scope => :journals) -%></h1>

<table class='striped'>
  <tr>
    <th><%= t(:type, :scope => :journals) -%></th>
    <th><%= t(:number, :scope => :journals) -%></th>
    <th><%= t(:journal_date, :scope => :journals) -%></th>
    <th></th>
  </tr>

<% for journal in @journals %>
  <tr>
    <td><%= journal.journal_type %></td>
    <td><%= journal.number %></td>
    <td><%= journal.journal_date ? l(journal.journal_date) : "" %></td>
    <td>
      <%= link_to t(:show, :scope => :journals), journal %>
      <% if permitted_to? :edit, journal %>
        <%= link_to t(:edit, :scope => :journals), edit_journal_path(journal) %>
      <% end %>
      <% if permitted_to? :delete, journal %>
        <%= link_to t(:destroy, :scope => :journals), journal, :confirm => 'Are you sure?', :method => :delete %>
      <% elsif not journal.bill.nil? %>
        <%= link_to 'Show bill', :controller => "bills", :action => "show", :id => journal.bill.id %>
        <% if permitted_to? :edit, journal.bill %>
          <%= link_to 'Edit bill', :controller => "bills", :action => "edit", :id => journal.bill.id %>
        <% end %>
        <% if permitted_to? :delete, journal.bill %>
          <%= link_to 'Destroy bill', journal.bill, :confirm => 'Are you sure?', :method => :delete %>
        <% end %>
      <% end %>
    </td>
  </tr>
<% end %>
</table>

<br />

<% if permitted_to? :create, :journals %>
  <%= link_to t(:new_journal, :scope => :journals), new_journal_path %>
<% end %>
